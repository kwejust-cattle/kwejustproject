{% extends 'adminpanel.html' %}
{% block content %}
<button class="btn btn-primary mb-3" id="openSellModalBtn">
    ðŸ’Š Sell Medicine
</button>

<div class="modal fade" id="sellModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Sell Medicine</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <!-- Select Medicine & Batch -->
        <div class="row">
          <div class="col-md-4">
            <label>Medicine</label>
            <select id="sell_medicine" class="form-select"></select>
          </div>

          <div class="col-md-4">
            <label>Batch</label>
            <select id="sell_batch" class="form-select"></select>
          </div>

          <div class="col-md-2">
            <label>Quantity</label>
            <input type="number" id="sell_qty" min="1" class="form-control">
          </div>

          <div class="col-md-2 d-flex align-items-end">
            <button class="btn btn-primary w-100" id="addToCartBtn">Add</button>
          </div>
        </div>
 
    </hr>

        <!-- CART TABLE -->
        <table class="table table-bordered" id="cartTable">
          <thead>
            <tr>
              <th>Medicine</th>
              <th>Batch</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <hr>

        <!-- Payment Section -->
        <div class="row">
          <div class="col-md-4">
            <label>Customer Name</label>
            <input id="customer_name" class="form-control">
          </div>

          <div class="col-md-4">
            <label>Total Amount</label>
            <input id="total_amount" class="form-control" readonly>
          </div>

          <div class="col-md-4">
            <label>Paid Amount</label>
            <input id="paid_amount" class="form-control">
          </div>
        </div>

      </div>

      <div class="modal-footer">
        <button class="btn btn-success" id="submitSaleBtn">Submit Sale</button>
      </div>

    </div>
  </div>
</div>

<hr>

<h4 class="mt-4">Recent Sales</h4>

<table id="salesTable" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Date</th>
            <th>Medicine</th>
            <th>Batch</th>
            <th>Qty</th>
            <th>Customer</th>
            <th>Sold By</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<!-- Edit Sale Modal -->
<div class="modal fade" id="editSaleModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">Edit Sale</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <input type="hidden" id="edit_saleitem_id">
                <input type="hidden" id="edit_sale_id">

                <div class="row">
                    <div class="col-md-6">
                        <label>Customer Name</label>
                        <input id="edit_customer" class="form-control">
                    </div>

                    <div class="col-md-6">
                        <label>Paid Amount</label>
                        <input id="edit_paid" class="form-control">
                    </div>
                </div>

                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <label>Medicine</label>
                        <select id="edit_medicine" class="form-select"></select>
                    </div>

                    <div class="col-md-4">
                        <label>Batch</label>
                        <select id="edit_batch" class="form-select"></select>
                    </div>

                    <div class="col-md-4">
                        <label>Quantity</label>
                        <input type="number" id="edit_qty" min="1" class="form-control">
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-success" onclick="saveEditedSale()">Save Changes</button>
            </div>

        </div>
    </div>
</div>

{% endblock %}